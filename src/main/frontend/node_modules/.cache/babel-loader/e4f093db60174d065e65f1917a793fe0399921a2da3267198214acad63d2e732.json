{"ast":null,"code":"import useModal from\"./useModal\";import{useEffect,useRef,useState}from\"react\";import{useSelector}from\"react-redux\";import{MutableRefObject}from\"react\";export function useRenderlessModal(modalName){const modal=useModal();const{lock}=useSelector(s=>s.modalReducer);const[active,setActive]=useState(false);const componentRef=useRef(null);useEffect(()=>{// console.log(`active: ${active}`)\nif(active){modal.openRenderlessModal(modalName,()=>{},()=>{// console.log('onclose')\nsetActive(false);},{ref:componentRef.current});}},[active]);const clickToOpen=e=>{if(!active&&componentRef.current&&!componentRef.current.contains(e.target)){open();}};const open=()=>{const keyname=modalName.split('__')[0];if(lock&&lock.startsWith(keyname)){// console.log(`locked: ${keyname}, open: ${lock}`)\nreturn;}setActive(true);};const close=()=>{setActive(false);modal.closeModal(modalName);};const setPos=(top,left)=>{const el=componentRef.current;// el.style.position = \"absolute\"\nel.style.top=\"\".concat(top,\"px\");el.style.left=\"\".concat(left,\"px\");};return{active,setActive,ref:componentRef,clickToOpen,open,close,setPos};}","map":{"version":3,"names":["useModal","useEffect","useRef","useState","useSelector","MutableRefObject","useRenderlessModal","modalName","modal","lock","s","modalReducer","active","setActive","componentRef","openRenderlessModal","ref","current","clickToOpen","e","contains","target","open","keyname","split","startsWith","close","closeModal","setPos","top","left","el","style","concat"],"sources":["/Users/chan/Baektracker/src/main/frontend/src/js/setup/hook/useRenderlessModal.js"],"sourcesContent":["import useModal from \"./useModal\";\nimport {useEffect, useRef, useState} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {MutableRefObject} from \"react\";\n\nexport function useRenderlessModal(modalName){\n    const modal = useModal();\n    const {lock} : Object<string> = useSelector(s=>s.modalReducer)\n    const [active, setActive] = useState(false)\n\n    const componentRef: MutableRefObject<HTMLElement> = useRef(null)\n\n    useEffect(() => {\n        // console.log(`active: ${active}`)\n        if(active){\n            modal.openRenderlessModal(modalName, ()=>{}, ()=>{\n                // console.log('onclose')\n                setActive(false)\n            }, {\n                ref: componentRef.current\n            })\n        }\n    }, [active]);\n\n    const clickToOpen = (e: MouseEvent)=>{\n        if(!active && componentRef.current && !componentRef.current.contains(e.target)){\n\n            open()\n        }\n    }\n\n    const open = ()=>{\n        const keyname = modalName.split('__')[0];\n        if(lock && lock.startsWith(keyname)){\n            // console.log(`locked: ${keyname}, open: ${lock}`)\n           return;\n        }\n        setActive(true)\n    }\n\n    const close = ()=>{\n        setActive(false)\n        modal.closeModal(modalName)\n    }\n\n    const setPos = (top, left)=>{\n        const el = componentRef.current;\n        // el.style.position = \"absolute\"\n        el.style.top = `${top}px`\n        el.style.left = `${left}px`\n    }\n\n    return {\n        active,\n        setActive,\n        ref: componentRef,\n        clickToOpen,\n        open,\n        close,\n        setPos\n    }\n}"],"mappings":"AAAA,MAAO,CAAAA,QAAQ,KAAM,YAAY,CACjC,OAAQC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAO,OAAO,CACjD,OAAQC,WAAW,KAAO,aAAa,CACvC,OAAQC,gBAAgB,KAAO,OAAO,CAEtC,MAAO,SAAS,CAAAC,kBAAkBA,CAACC,SAAS,CAAC,CACzC,KAAM,CAAAC,KAAK,CAAGR,QAAQ,CAAC,CAAC,CACxB,KAAM,CAACS,IAAqB,CAAC,CAAGL,WAAW,CAACM,CAAC,EAAEA,CAAC,CAACC,YAAY,CAAC,CAC9D,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CAE3C,KAAM,CAAAW,YAA2C,CAAGZ,MAAM,CAAC,IAAI,CAAC,CAEhED,SAAS,CAAC,IAAM,CACZ;AACA,GAAGW,MAAM,CAAC,CACNJ,KAAK,CAACO,mBAAmB,CAACR,SAAS,CAAE,IAAI,CAAC,CAAC,CAAE,IAAI,CAC7C;AACAM,SAAS,CAAC,KAAK,CAAC,CACpB,CAAC,CAAE,CACCG,GAAG,CAAEF,YAAY,CAACG,OACtB,CAAC,CAAC,CACN,CACJ,CAAC,CAAE,CAACL,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAM,WAAW,CAAIC,CAAa,EAAG,CACjC,GAAG,CAACP,MAAM,EAAIE,YAAY,CAACG,OAAO,EAAI,CAACH,YAAY,CAACG,OAAO,CAACG,QAAQ,CAACD,CAAC,CAACE,MAAM,CAAC,CAAC,CAE3EC,IAAI,CAAC,CAAC,CACV,CACJ,CAAC,CAED,KAAM,CAAAA,IAAI,CAAGA,CAAA,GAAI,CACb,KAAM,CAAAC,OAAO,CAAGhB,SAAS,CAACiB,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CACxC,GAAGf,IAAI,EAAIA,IAAI,CAACgB,UAAU,CAACF,OAAO,CAAC,CAAC,CAChC;AACD,OACH,CACAV,SAAS,CAAC,IAAI,CAAC,CACnB,CAAC,CAED,KAAM,CAAAa,KAAK,CAAGA,CAAA,GAAI,CACdb,SAAS,CAAC,KAAK,CAAC,CAChBL,KAAK,CAACmB,UAAU,CAACpB,SAAS,CAAC,CAC/B,CAAC,CAED,KAAM,CAAAqB,MAAM,CAAGA,CAACC,GAAG,CAAEC,IAAI,GAAG,CACxB,KAAM,CAAAC,EAAE,CAAGjB,YAAY,CAACG,OAAO,CAC/B;AACAc,EAAE,CAACC,KAAK,CAACH,GAAG,IAAAI,MAAA,CAAMJ,GAAG,MAAI,CACzBE,EAAE,CAACC,KAAK,CAACF,IAAI,IAAAG,MAAA,CAAMH,IAAI,MAAI,CAC/B,CAAC,CAED,MAAO,CACHlB,MAAM,CACNC,SAAS,CACTG,GAAG,CAAEF,YAAY,CACjBI,WAAW,CACXI,IAAI,CACJI,KAAK,CACLE,MACJ,CAAC,CACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}