{"ast":null,"code":"var _s = $RefreshSig$();\nimport useModal from \"./useModal\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { MutableRefObject } from \"react\";\nexport function useRenderlessModal(modalName) {\n  _s();\n  const modal = useModal();\n  const {\n    lock\n  } = useSelector(s => s.modalReducer);\n  const [active, setActive] = useState(false);\n  const componentRef = useRef(null);\n  useEffect(() => {\n    // console.log(`active: ${active}`)\n    if (active) {\n      modal.openRenderlessModal(modalName, () => {}, () => {\n        // console.log('onclose')\n        setActive(false);\n      }, {\n        ref: componentRef.current\n      });\n    }\n  }, [active]);\n  const clickToOpen = e => {\n    if (!active && componentRef.current && !componentRef.current.contains(e.target)) {\n      open();\n    }\n  };\n  const open = () => {\n    const keyname = modalName.split('__')[0];\n    if (lock && lock.startsWith(keyname)) {\n      // console.log(`locked: ${keyname}, open: ${lock}`)\n      return;\n    }\n    setActive(true);\n  };\n  const close = () => {\n    setActive(false);\n    modal.closeModal(modalName);\n  };\n  const setPos = (top, left) => {\n    const el = componentRef.current;\n    // el.style.position = \"absolute\"\n    el.style.top = `${top}px`;\n    el.style.left = `${left}px`;\n  };\n  return {\n    active,\n    setActive,\n    ref: componentRef,\n    clickToOpen,\n    open,\n    close,\n    setPos\n  };\n}\n_s(useRenderlessModal, \"qlp3lTF6iKlnTmgbx/iOqit2Q/8=\", false, function () {\n  return [useModal, useSelector];\n});","map":{"version":3,"names":["useModal","useEffect","useRef","useState","useSelector","MutableRefObject","useRenderlessModal","modalName","_s","modal","lock","s","modalReducer","active","setActive","componentRef","openRenderlessModal","ref","current","clickToOpen","e","contains","target","open","keyname","split","startsWith","close","closeModal","setPos","top","left","el","style"],"sources":["/Users/chan/Baektracker/src/main/frontend/src/js/setup/hook/useRenderlessModal.js"],"sourcesContent":["import useModal from \"./useModal\";\nimport {useEffect, useRef, useState} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {MutableRefObject} from \"react\";\n\nexport function useRenderlessModal(modalName){\n    const modal = useModal();\n    const {lock} : Object<string> = useSelector(s=>s.modalReducer)\n    const [active, setActive] = useState(false)\n\n    const componentRef: MutableRefObject<HTMLElement> = useRef(null)\n\n    useEffect(() => {\n        // console.log(`active: ${active}`)\n        if(active){\n            modal.openRenderlessModal(modalName, ()=>{}, ()=>{\n                // console.log('onclose')\n                setActive(false)\n            }, {\n                ref: componentRef.current\n            })\n        }\n    }, [active]);\n\n    const clickToOpen = (e: MouseEvent)=>{\n        if(!active && componentRef.current && !componentRef.current.contains(e.target)){\n\n            open()\n        }\n    }\n\n    const open = ()=>{\n        const keyname = modalName.split('__')[0];\n        if(lock && lock.startsWith(keyname)){\n            // console.log(`locked: ${keyname}, open: ${lock}`)\n           return;\n        }\n        setActive(true)\n    }\n\n    const close = ()=>{\n        setActive(false)\n        modal.closeModal(modalName)\n    }\n\n    const setPos = (top, left)=>{\n        const el = componentRef.current;\n        // el.style.position = \"absolute\"\n        el.style.top = `${top}px`\n        el.style.left = `${left}px`\n    }\n\n    return {\n        active,\n        setActive,\n        ref: componentRef,\n        clickToOpen,\n        open,\n        close,\n        setPos\n    }\n}"],"mappings":";AAAA,OAAOA,QAAQ,MAAM,YAAY;AACjC,SAAQC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAO,OAAO;AACjD,SAAQC,WAAW,QAAO,aAAa;AACvC,SAAQC,gBAAgB,QAAO,OAAO;AAEtC,OAAO,SAASC,kBAAkBA,CAACC,SAAS,EAAC;EAAAC,EAAA;EACzC,MAAMC,KAAK,GAAGT,QAAQ,CAAC,CAAC;EACxB,MAAM;IAACU;EAAqB,CAAC,GAAGN,WAAW,CAACO,CAAC,IAAEA,CAAC,CAACC,YAAY,CAAC;EAC9D,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAE3C,MAAMY,YAA2C,GAAGb,MAAM,CAAC,IAAI,CAAC;EAEhED,SAAS,CAAC,MAAM;IACZ;IACA,IAAGY,MAAM,EAAC;MACNJ,KAAK,CAACO,mBAAmB,CAACT,SAAS,EAAE,MAAI,CAAC,CAAC,EAAE,MAAI;QAC7C;QACAO,SAAS,CAAC,KAAK,CAAC;MACpB,CAAC,EAAE;QACCG,GAAG,EAAEF,YAAY,CAACG;MACtB,CAAC,CAAC;IACN;EACJ,CAAC,EAAE,CAACL,MAAM,CAAC,CAAC;EAEZ,MAAMM,WAAW,GAAIC,CAAa,IAAG;IACjC,IAAG,CAACP,MAAM,IAAIE,YAAY,CAACG,OAAO,IAAI,CAACH,YAAY,CAACG,OAAO,CAACG,QAAQ,CAACD,CAAC,CAACE,MAAM,CAAC,EAAC;MAE3EC,IAAI,CAAC,CAAC;IACV;EACJ,CAAC;EAED,MAAMA,IAAI,GAAGA,CAAA,KAAI;IACb,MAAMC,OAAO,GAAGjB,SAAS,CAACkB,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACxC,IAAGf,IAAI,IAAIA,IAAI,CAACgB,UAAU,CAACF,OAAO,CAAC,EAAC;MAChC;MACD;IACH;IACAV,SAAS,CAAC,IAAI,CAAC;EACnB,CAAC;EAED,MAAMa,KAAK,GAAGA,CAAA,KAAI;IACdb,SAAS,CAAC,KAAK,CAAC;IAChBL,KAAK,CAACmB,UAAU,CAACrB,SAAS,CAAC;EAC/B,CAAC;EAED,MAAMsB,MAAM,GAAGA,CAACC,GAAG,EAAEC,IAAI,KAAG;IACxB,MAAMC,EAAE,GAAGjB,YAAY,CAACG,OAAO;IAC/B;IACAc,EAAE,CAACC,KAAK,CAACH,GAAG,GAAG,GAAGA,GAAG,IAAI;IACzBE,EAAE,CAACC,KAAK,CAACF,IAAI,GAAG,GAAGA,IAAI,IAAI;EAC/B,CAAC;EAED,OAAO;IACHlB,MAAM;IACNC,SAAS;IACTG,GAAG,EAAEF,YAAY;IACjBI,WAAW;IACXI,IAAI;IACJI,KAAK;IACLE;EACJ,CAAC;AACL;AAACrB,EAAA,CAxDeF,kBAAkB;EAAA,QAChBN,QAAQ,EACUI,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}